// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Account {
  id       String      @id @db.VarChar(36)
  email    String      @unique @db.VarChar(125)
  password String      @db.VarChar(255)
  name     String      @unique @db.VarChar(55)
  type     AccountType
  active   Boolean     @default(true) @ignore
  cnpj     String?     @unique @db.VarChar(14)
  animals  Animal[]
}

enum AccountType {
  ADMIN
  PROTECTOR
}

model Animal {
  id       String              @id @db.VarChar(36)
  name     String              @db.VarChar(55)
  specie   AnimalSpecie
  gender   AnimalGender
  sickness AnimalsOnSickness[]
  active   Boolean             @default(true) @ignore
  owner    String              @map("owner_id") @db.VarChar(36)
  account  Account             @relation(fields: [owner], references: [id])
}

model Sickness {
  id      String              @id @db.VarChar(36)
  name    String              @db.VarChar(55)
  species AnimalSpecie[]
  animals AnimalsOnSickness[]
}

enum AnimalSpecie {
  CAT
  DOG
}

enum AnimalGender {
  MALE
  FEMALE
}

model AnimalsOnSickness {
  animal     Animal   @relation(fields: [animalId], references: [id])
  animalId   String   @map("animal_id")
  sickness   Sickness @relation(fields: [sicknessId], references: [id])
  sicknessId String   @map("sickness_id")
  addedAt    DateTime @default(now()) @map("added_at")

  @@id([animalId, sicknessId])
}
